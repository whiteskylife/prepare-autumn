58同城（可能不全）

一面：

讲一讲volatile关键字？

volatile 怎么防止指令重排的？

什么是内存屏障，有什么用？

synchronized和lock的区别？



反射，在哪里用到过反射？（我懵逼了一会，答了一个AOP，别的实在是不知道，前两天看spring aop，记得有个反射）



HTTPS和HTTP的区别？

证书，密钥怎么运作的？

假设没有证书，第一次访问一个网站，怎么获得证书，怎么识别的？

什么是丢包，为什么会丢包？

字符串作为主键id索引和数字作为主键id索引有什么区别，说说各自的优缺点？

手写算法：给个数字，一次遍历找出最大的和第二大的数字。



二面：（全程被虐）

泛型会吗？

写一个泛型方法传入数组，传出一个集合，包含这个数组的元素？（这个我直接懵，集合是一个接口，怎么返回接口实现的？还特意问了是不是返回list，不是。）



知道代理吗？

几种动态代理的区别？（忘了，说实话，泛型，代理和反射都是Java SE开始的那一部分，基本没认真看完。）



有哪些方法可以保证线程安全？（说了几个，但是没有说到面试官想听的ThreadLocal）

你知道ThreadLocal吗？

ThreadLocal有什么缺点？（线程池会复用线程，久的数据留在里面，会出问题）



ConcurrentHashMap源码看过没？

为什么效率较高？（我这个废物分段锁都讲不清楚。）



知道内部类吗？为什么要使用内部类？（我说了Map.Entry）

内部类只是自己使用，如果不使用内部类，定义在外面有什么坏处？（我不会，面试官告诉我说，影响堆的gc）



Java nio知道吗，讲一讲？

buffer源码看过吗？（我之前看过这个部分，但是有点久了，忘记了。就是四个index前后移动的那部分，我忘了，就说了我没看过）



智力题，100个球，你我玩游戏，每次能拿1～6个，你决定谁先出手。球拿完的前一次出手的人胜利。什么策略让自己稳胜。（我先出手，第一次拿两个。然后，对手拿n个，我就拿7-n个，那么最后一次一定是我。）



分割线-- - - - - — - - - - — - - - — - — — -  — - - - — - - — - - — - - - 

可能不太全，但是，很有印象的都记下来了，最后面试官说，让我好好看看jdk源码，里面有很多有意思的写法。一个很和蔼的小老头，但是转头就挂我。

二面是真的，有点超出了我的能力范围，不过也是有道理的，一路走来，只知道写项目，jdk jvm这块看过，但是也在一直写项目的过程中丢失了。二面挂了，但是是一个很有收获的面试经历。

